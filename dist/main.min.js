const openButton=document.querySelector("#openOverlay"),successModal=createModal(),body=document.body;function createModal(e){const t=document.createElement("div");t.classList.add("overlay");var a=document.querySelector("#overlayTemplate");t.innerHTML=a.innerHTML,t.addEventListener("click",e=>{e.target===t&&o.click()});const o=t.querySelector(".close");return o.addEventListener("click",e=>{e.preventDefault(),body.removeChild(t);e=parseInt(body.dataset.position,10);body.style.top="avto",body.classList.remove("disable-scroll"),window.scroll({top:e,left:0}),body.removeAttribute("data-position")}),t}openButton.addEventListener("click",e=>{body.appendChild(successModal);var t=window.scrollY;body.classList.add("disable-scroll"),body.dataset.position=t,body.style.top=-t+"px"});const leftbtn=document.querySelector("#left"),rightbtn=document.querySelector("#right"),items=document.querySelector("#list"),computedStyle=getComputedStyle(list);var offsetWidth=document.getElementById("goods").offsetWidth,offsetHeight=document.getElementById("goods").offsetHeight;let currentRight=0;rightbtn.addEventListener("click",e=>{e.preventDefault();e=parseInt(computedStyle.right);e<100&&(items.style.right=e+offsetWidth+"px"),100<e&&(items.style.right=0*e+"px")}),leftbtn.addEventListener("click",e=>{e.preventDefault();e=parseInt(computedStyle.right);0<e&&(items.style.right=e-offsetWidth+"px"),e<=0&&(items.style.right=e+offsetWidth+"px")}),$(".click__info").click(function(e){e.preventDefault();e=$(this).closest(".humans__list");0==$(this).next().is(":visible")&&(e.find(".human").removeClass("slide active"),e.find(".human__info").slideUp()),$(this).next().slideToggle(),$(this).parent().addClass("slide")});const findBlockByAlias=a=>$(".reviews__item").filter((e,t)=>$(t).attr("data-linked")==a),validateFields=($(".avatar__link").click(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.attr("data-open"),t=findBlockByAlias(t),e=e.closest(".avatar__item");t.addClass("active").siblings().removeClass("active"),e.addClass("active").siblings().removeClass("active")}),(e,t)=>{return t.forEach(e=>{e.removeClass("input-error"),""==e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length}),lines=($(".form").submit(e=>{e.preventDefault();var e=$(e.currentTarget),t=e.find("[name='name']"),a=e.find("[name='phone']"),o=e.find("[name='comment']"),n=e.find("[name='to']");const i=$("#modal"),l=i.find(".modal__content");i.removeClass("error-modal"),validateFields(e,[t,a,o,n])&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:t.val(),phone:a.val(),comment:o.val(),to:n.val()}})).done(e=>{l.text(e.message)}),e.fail(e=>{l.text("Сообщение не отправлено"),i.addClass("error-modal")}),e.always(()=>{$.fancybox.open({src:"#modal",type:"inline"});var e=window.scrollY;body.classList.add("disable-scroll"),body.dataset.position=e}))}),$(".app-close-modal").click(e=>{e.preventDefault(),$.fancybox.close();e=parseInt(body.dataset.position,10);body.classList.remove("disable-scroll"),window.scroll({top:e,left:0}),body.removeAttribute("data-position")}),document.querySelectorAll(".slide-acco__line"));for(let e=0;e<lines.length;e++){const S=lines[e];S.addEventListener("click",e=>{if(e.preventDefault(),!e.target.classList.contains("slide-acco__content")){var t=e.target.closest(".slide-acco__line");for(let e=0;e<lines.length;e++)lines[e]!==t&&lines[e].classList.remove("slide-acco__line_active");t.classList.contains("slide-acco__line_active")?t.classList.remove("slide-acco__line_active"):t.classList.add("slide-acco__line_active"),overlayElement.querySelector(".close-slide").addEventListener("click",e=>{e.preventDefault(),body.removeChild(overlayElement)})}})}let player;const playerContainer=$(".player");let eventsInit=()=>{$(".player__start").click(e=>{e.preventDefault(),playerContainer.hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").click(e=>{var t=$(e.currentTarget),e=e.originalEvent.layerX/t.width()*100,t=player.getDuration()/100*e;$(".player__playback-button").css({left:e+"%"}),player.seekTo(t)}),$(".player__splash").click(e=>{player.playVideo()})};const formatTime=e=>{var e=Math.round(e),t=a(Math.floor(e/60));function a(e){return e<10?"0"+e:e}return t+":"+a(e-60*t)},onPlayerReady=()=>{const a=player.getDuration();$(".player__duration-estimate").text(formatTime(a)),"undefined"!=typeof interval&&clearInterval(interval),interval=setInterval(()=>{var e=player.getCurrentTime(),t=e/a*100;$(".player__playback-button").css({left:t+"%"}),$(".player__duration-completed").text(formatTime(e))},1e3)},onPlayerStateChange=e=>{switch(e.data){case 1:playerContainer.addClass("active"),playerContainer.addClass("paused");break;case 2:playerContainer.removeClass("active"),playerContainer.removeClass("paused")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"ma67yOdMQfs",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:1,showinfo:0,rel:0,autoplay:0,modestbranding:0}})}eventsInit();let myMap;const init=()=>{myMap=new ymaps.Map("map",{center:[55.752004,37.576133],zoom:13,controls:[]});var t=[[55.752044,37.599649]],a=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/marker.png",iconImageSize:[46,57],iconImageOffset:[-35,-52]});for(let e=0;e<t.length;e++)a.add(new ymaps.Placemark(t[e]));myMap.geoObjects.add(a),myMap.behaviors.disable("scrollZoom")},sections=(ymaps.ready(init),$(".section")),display=$(".maincontent"),sidemenu=$(".fixed-menu"),menuItems=sidemenu.find(".fixed-menu__item"),mobileDetect=new MobileDetect(window.navigator.userAgent),isMobile=mobileDetect.mobile();let inscroll=!1;sections.first().addClass("active");const countSectionPosition=e=>{e*=-100;return isNaN(e)&&(console.error("передано неверное значение в countSectionPosition"),return0),e},changeMenuThemeForSection=e=>{var t="fixed-menu--shadowed";"black"==sections.eq(e).attr("data-sidemenu-theme")?sidemenu.addClass(t):sidemenu.removeClass(t)},resetActiveClassForItem=(e,t,a)=>{e.eq(t).addClass(a).siblings().removeClass(a)},performTransition=e=>{var t;inscroll||(inscroll=!0,t=countSectionPosition(e),changeMenuThemeForSection(e),display.css({transform:`translateY(${t}%)`}),resetActiveClassForItem(sections,e,"active"),setTimeout(()=>{inscroll=!1,resetActiveClassForItem(menuItems,e,"fixed-menu__item--active")},1300))},viewportScroller=()=>{var e=sections.filter(".active");const t=e.next(),a=e.prev();return{next(){t.length&&performTransition(t.index())},prev(){a.length&&performTransition(a.index())}}};$(window).on("wheel",e=>{var e=e.originalEvent.deltaY,t=viewportScroller();0<e&&t.next(),e<0&&t.prev()}),$(".wraper").on("touchmove",e=>e.preventDefault()),$("[data-scroll-to]").click(e=>{e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$(`[data-section-id=${e}]`);performTransition(e.index())}),isMobile&&$("body").swipe({swipe:function(e,t){let a="down"==t?"prev":"up"==t?"next":"";viewportScroller()[a]()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdDEuanMiLCJzY3JpcHQyLmpzIiwic2NyaXB0My5qcyIsInNjcmlwdDQuanMiLCJzY3JpcHQ1LmpzIiwic2NyaXB0Ni5qcyIsInNjcmlwdDcuanMiLCJzY3JpcHQ4LmpzIiwic2NyaXB0OS5qcyJdLCJuYW1lcyI6WyJvcGVuQnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3VjY2Vzc01vZGFsIiwiY3JlYXRlTW9kYWwiLCJib2R5IiwiY29udGVudCIsIm92ZXJsYXlFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJ0YXJnZXQiLCJjbG9zZUVsZW1lbnQiLCJjbGljayIsInByZXZlbnREZWZhdWx0IiwicmVtb3ZlQ2hpbGQiLCJwYWdlUG9zaXRpb24iLCJwYXJzZUludCIsImRhdGFzZXQiLCJwb3NpdGlvbiIsInN0eWxlIiwidG9wIiwicmVtb3ZlIiwid2luZG93Iiwic2Nyb2xsIiwibGVmdCIsInJlbW92ZUF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwibGV0Iiwic2Nyb2xsWSIsImxlZnRidG4iLCJyaWdodGJ0biIsIml0ZW1zIiwiY29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGUiLCJsaXN0Iiwib2Zmc2V0V2lkdGgiLCJnZXRFbGVtZW50QnlJZCIsIm9mZnNldEhlaWdodCIsImN1cnJlbnRSaWdodCIsInJpZ2h0IiwiJCIsIm1lbnUiLCJ0aGlzIiwiY2xvc2VzdCIsIm5leHQiLCJpcyIsImZpbmQiLCJyZW1vdmVDbGFzcyIsInNsaWRlVXAiLCJzbGlkZVRvZ2dsZSIsInBhcmVudCIsImFkZENsYXNzIiwiZmluZEJsb2NrQnlBbGlhcyIsImFsaWFzIiwiZmlsdGVyIiwibmR4IiwiaXRlbSIsImF0dHIiLCJ2YWxpZGF0ZUZpZWxkcyIsIiR0aGlzIiwiY3VycmVudFRhcmdldCIsInRlcmdldCIsIml0ZW1Ub1Nob3ciLCJjdXJJdGVtIiwic2libGluZ3MiLCJmb3JtIiwiZmllbGRzQXJyYXkiLCJmb3JFYWNoIiwiZmllbGQiLCJ2YWwiLCJ0cmltIiwibGVuZ3RoIiwibGluZXMiLCJzdWJtaXQiLCJuYW1lIiwicGhvbmUiLCJjb21tZW50IiwidG8iLCJtb2RhbCIsInJlcXVlc3QiLCJhamF4IiwidXJsIiwibWV0aG9kIiwiZGF0YSIsImRvbmUiLCJ0ZXh0IiwibWVzc2FnZSIsImZhaWwiLCJhbHdheXMiLCJmYW5jeWJveCIsIm9wZW4iLCJzcmMiLCJ0eXBlIiwiY2xvc2UiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5kZXgiLCJlbGVtZW50IiwiY29udGFpbnMiLCJjdXJyZW50TGluZSIsImkiLCJwbGF5ZXIiLCJwbGF5ZXJDb250YWluZXIiLCJldmVudHNJbml0IiwiaGFzQ2xhc3MiLCJwYXVzZVZpZGVvIiwicGxheVZpZGVvIiwiYmFyIiwibmV3QnV0dG9uUG9zaXRpb25QZXJjZW50Iiwib3JpZ2luYWxFdmVudCIsImxheWVyWCIsIndpZHRoIiwibmV3UGxheWJhY2tQb3NpdGlvblNlYyIsImdldER1cmF0aW9uIiwiY3NzIiwic2Vla1RvIiwiZm9ybWF0VGltZSIsInRpbWVTZWMiLCJyb3VuZFRpbWUiLCJNYXRoIiwicm91bmQiLCJtaW51dGVzIiwiYWRkWmVybyIsImZsb29yIiwibnVtIiwib25QbGF5ZXJSZWFkeSIsImR1cmF0aW9uU2VjIiwiaW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjb21wbGV0ZWRTZWMiLCJnZXRDdXJyZW50VGltZSIsImNvbXBsZXRlZFBlcmNlbnQiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwiZXZlbnQiLCJvbllvdVR1YmVJZnJhbWVBUElSZWFkeSIsIllUIiwiUGxheWVyIiwiaGVpZ2h0IiwidmlkZW9JZCIsImV2ZW50cyIsIm9uUmVhZHkiLCJvblN0YXRlQ2hhbmdlIiwicGxheWVyVmFycyIsImNvbnRyb2xzIiwiZGlzYWJsZWtiIiwic2hvd2luZm8iLCJyZWwiLCJhdXRvcGxheSIsIm1vZGVzdGJyYW5kaW5nIiwibXlNYXAiLCJpbml0IiwieW1hcHMiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29vcmRzIiwibXlDb2xsZWN0aW9uIiwiR2VvT2JqZWN0Q29sbGVjdGlvbiIsImRyYWdnYWJsZSIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsIlBsYWNlbWFyayIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwic2VjdGlvbnMiLCJyZWFkeSIsImRpc3BsYXkiLCJzaWRlbWVudSIsIm1lbnVJdGVtcyIsIm1vYmlsZURldGVjdCIsIk1vYmlsZURldGVjdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImlzTW9iaWxlIiwibW9iaWxlIiwiaW5zY3JvbGwiLCJmaXJzdCIsImNvdW50U2VjdGlvblBvc2l0aW9uIiwic2VjdGlvbkVxIiwiaXNOYU4iLCJjb25zb2xlIiwiZXJyb3IiLCJyZXR1cm4wIiwiY2hhbmdlTWVudVRoZW1lRm9yU2VjdGlvbiIsImFjdGl2ZUNsYXNzIiwiZXEiLCJyZXNldEFjdGl2ZUNsYXNzRm9ySXRlbSIsIml0ZW1FcSIsInBlcmZvcm1UcmFuc2l0aW9uIiwidHJhbnNmb3JtIiwic2V0VGltZW91dCIsInRyYW5zaXRpb25PdmVyIiwidmlld3BvcnRTY3JvbGxlciIsImFjdGl2ZXNlY3Rpb24iLCJuZXh0c2VjdGlvbiIsInByZXZzZWN0aW9uIiwicHJldiIsIm9uIiwiZGVsdGFZIiwic2Nyb2xsZXIiLCJyZXFzZWN0aW9uIiwic3dpcGUiLCJkaXJlY3Rpb24iLCJzY3JvbGxEaXJlY3Rpb24iXSwibWFwcGluZ3MiOiJBQUFBLE1BQUFBLFdBQUFDLFNBQUFDLGNBQUEsY0FBQSxFQUNBQyxhQUFBQyxZQUFBLEVBQ0FDLEtBQUFKLFNBQUFJLEtBVUEsU0FBQUQsWUFBQUUsR0FDQSxNQUFBQyxFQUFBTixTQUFBTyxjQUFBLEtBQUEsRUFDQUQsRUFBQUUsVUFBQUMs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ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNvcGVuT3ZlcmxheVwiKTtcbmNvbnN0IHN1Y2Nlc3NNb2RhbCA9IGNyZWF0ZU1vZGFsKCk7XG5jb25zdCBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxub3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gIGJvZHkuYXBwZW5kQ2hpbGQoc3VjY2Vzc01vZGFsKTtcbiAgbGV0IHBhZ2VQb3NpdGlvbj13aW5kb3cuc2Nyb2xsWTtcbiAgYm9keS5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlLXNjcm9sbCcpO1xuICBib2R5LmRhdGFzZXQucG9zaXRpb24gPXBhZ2VQb3NpdGlvbjtcbiAgYm9keS5zdHlsZS50b3A9LXBhZ2VQb3NpdGlvbisncHgnO1xufSlcblxuZnVuY3Rpb24gY3JlYXRlTW9kYWwoY29udGVudCkge1xuICBjb25zdCBvdmVybGF5RWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvdmVybGF5RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheVwiKTtcblxuICBjb25zdCB0ZW1wbGF0ZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI292ZXJsYXlUZW1wbGF0ZVwiKTtcbiAgb3ZlcmxheUVsZW1lbnQuaW5uZXJIVE1MPXRlbXBsYXRlLmlubmVySFRNTDtcbiAgICBvdmVybGF5RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBvdmVybGF5RWxlbWVudCkge1xuICAgICAgY2xvc2VFbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuICB9KVxuXG4gIGNvbnN0IGNsb3NlRWxlbWVudCA9IG92ZXJsYXlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2VcIik7XG4gIGNsb3NlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheUVsZW1lbnQpO1xuICAgIGxldCBwYWdlUG9zaXRpb249cGFyc2VJbnQoYm9keS5kYXRhc2V0LnBvc2l0aW9uLDEwKTtcbiAgICBib2R5LnN0eWxlLnRvcD0nYXZ0byc7XG4gICAgYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlLXNjcm9sbCcpO1xuICAgIHdpbmRvdy5zY3JvbGwoe3RvcDpwYWdlUG9zaXRpb24sbGVmdDowfSk7XG4gICAgYm9keS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcG9zaXRpb24nKTtcbiAgfSlcbiAgcmV0dXJuIG92ZXJsYXlFbGVtZW50O1xufTtcbiIsImNvbnN0IGxlZnRidG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsZWZ0XCIpO1xuY29uc3QgcmlnaHRidG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyaWdodFwiKTtcbmNvbnN0IGl0ZW1zPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlzdFwiKTtcbmNvbnN0IGNvbXB1dGVkU3R5bGU9Z2V0Q29tcHV0ZWRTdHlsZShsaXN0KTtcbnZhciBvZmZzZXRXaWR0aCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29kcycpLm9mZnNldFdpZHRoO1xudmFyIG9mZnNldEhlaWdodCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdnb29kcycpLm9mZnNldEhlaWdodDtcblxubGV0IGN1cnJlbnRSaWdodD0wO1xuXG5yaWdodGJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixlPT57XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGxldCBjdXJyZW50UmlnaHQ9cGFyc2VJbnQoY29tcHV0ZWRTdHlsZS5yaWdodClcblxuICAgIGlmIChjdXJyZW50UmlnaHQ8MTAwKSB7XG4gICAgICAgIGl0ZW1zLnN0eWxlLnJpZ2h0PWAke2N1cnJlbnRSaWdodCtvZmZzZXRXaWR0aH1weGA7ICAgICAgXG4gICAgfVxuICAgIGlmIChjdXJyZW50UmlnaHQ+MTAwKSB7XG4gICAgICBpdGVtcy5zdHlsZS5yaWdodD1gJHtjdXJyZW50UmlnaHQqMH1weGA7ICAgICAgXG4gIH1cbn0pO1xuXG5sZWZ0YnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLGU9PntcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgbGV0IGN1cnJlbnRSaWdodD1wYXJzZUludChjb21wdXRlZFN0eWxlLnJpZ2h0KVxuICAgIFxuICAgIGlmIChjdXJyZW50UmlnaHQ+MCkge1xuICAgICAgICBpdGVtcy5zdHlsZS5yaWdodD1gJHtjdXJyZW50UmlnaHQtb2Zmc2V0V2lkdGh9cHhgOyAgICAgIFxuICAgIH1cbiAgICBpZiAoY3VycmVudFJpZ2h0PD0wKSB7XG4gICAgICBpdGVtcy5zdHlsZS5yaWdodD1gJHtjdXJyZW50UmlnaHQrb2Zmc2V0V2lkdGh9cHhgOyAgICAgIFxuICB9XG59KTsiLCIkKFwiLmNsaWNrX19pbmZvXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG5cdGUucHJldmVudERlZmF1bHQoKTtcblx0XG5cdHZhciBtZW51ID0gJCh0aGlzKS5jbG9zZXN0KCcuaHVtYW5zX19saXN0Jyk7XG5cdFxuXHRpZiAoZmFsc2UgPT0gJCh0aGlzKS5uZXh0KCkuaXMoJzp2aXNpYmxlJykpIHtcblx0XHRtZW51LmZpbmQoJy5odW1hbicpLnJlbW92ZUNsYXNzKCdzbGlkZSBhY3RpdmUnKTtcblx0XHRtZW51LmZpbmQoJy5odW1hbl9faW5mbycpLnNsaWRlVXAoKTtcblx0fVxuXHRcblx0JCh0aGlzKS5uZXh0KCkuc2xpZGVUb2dnbGUoKTtcblx0JCh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnc2xpZGUnKTtcbn0pOyIsImNvbnN0IGZpbmRCbG9ja0J5QWxpYXM9YWxpYXM9PntcbiAgcmV0dXJuICQoXCIucmV2aWV3c19faXRlbVwiKS5maWx0ZXIoKG5keCxpdGVtKT0+e1xuICAgIHJldHVybiAkKGl0ZW0pLmF0dHIoXCJkYXRhLWxpbmtlZFwiKT09YWxpYXNcbiAgfSlcbn1cbiQoXCIuYXZhdGFyX19saW5rXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIGNvbnN0ICR0aGlzPSQoZS5jdXJyZW50VGFyZ2V0KTtcbiAgY29uc3QgdGVyZ2V0PSR0aGlzLmF0dHIoXCJkYXRhLW9wZW5cIik7XG4gIGNvbnN0IGl0ZW1Ub1Nob3c9ZmluZEJsb2NrQnlBbGlhcyh0ZXJnZXQpO1xuICBjb25zdCBjdXJJdGVtPSR0aGlzLmNsb3Nlc3QoXCIuYXZhdGFyX19pdGVtXCIpO1xuXG4gIGl0ZW1Ub1Nob3cuYWRkQ2xhc3MoXCJhY3RpdmVcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTtcbiAgY3VySXRlbS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xufSk7IiwiY29uc3QgdmFsaWRhdGVGaWVsZHM9KGZvcm0sZmllbGRzQXJyYXkpPT57XG5cbiAgICBmaWVsZHNBcnJheS5mb3JFYWNoKGZpZWxkPT57XG4gICAgICBmaWVsZC5yZW1vdmVDbGFzcyhcImlucHV0LWVycm9yXCIpO1xuICAgICAgaWYgKGZpZWxkLnZhbCgpLnRyaW0oKT09XCJcIikge1xuICAgICAgICBmaWVsZC5hZGRDbGFzcyhcImlucHV0LWVycm9yXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICBcbiAgICBjb25zdCBlcnJvckZpZWxkcz1mb3JtLmZpbmQoXCIuaW5wdXQtZXJyb3JcIik7XG4gICAgXG4gICAgcmV0dXJuIGVycm9yRmllbGRzLmxlbmd0aD09PTA7XG4gIH1cbiAgXG4gICQoJy5mb3JtJykuc3VibWl0KGU9PntcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIFxuICAgIGNvbnN0IGZvcm09JChlLmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZT1mb3JtLmZpbmQoXCJbbmFtZT0nbmFtZSddXCIpO1xuICAgIGNvbnN0IHBob25lPWZvcm0uZmluZChcIltuYW1lPSdwaG9uZSddXCIpO1xuICAgIGNvbnN0IGNvbW1lbnQ9Zm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcbiAgICBjb25zdCB0bz1mb3JtLmZpbmQoXCJbbmFtZT0ndG8nXVwiKTtcbiAgXG4gICAgY29uc3QgbW9kYWw9JChcIiNtb2RhbFwiKTtcbiAgICBjb25zdCBjb250ZW50PW1vZGFsLmZpbmQoXCIubW9kYWxfX2NvbnRlbnRcIik7XG4gIFxuICAgIG1vZGFsLnJlbW92ZUNsYXNzKFwiZXJyb3ItbW9kYWxcIik7XG4gIFxuICAgIGNvbnN0IGlzVmFsaWQ9dmFsaWRhdGVGaWVsZHMoZm9ybSxbbmFtZSxwaG9uZSxjb21tZW50LHRvXSlcbiAgICBcbiAgICBpZiAoaXNWYWxpZCl7XG4gICAgICBjb25zdCByZXF1ZXN0PSQuYWpheCh7XG4gICAgICAgIHVybDpcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxuICAgICAgICBtZXRob2Q6XCJwb3N0XCIsXG4gICAgICAgIGRhdGE6e1xuICAgICAgICAgIG5hbWU6bmFtZS52YWwoKSxcbiAgICAgICAgICBwaG9uZTpwaG9uZS52YWwoKSxcbiAgICAgICAgICBjb21tZW50OmNvbW1lbnQudmFsKCksXG4gICAgICAgICAgdG86dG8udmFsKCksXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgXG4gICAgICByZXF1ZXN0LmRvbmUoKGRhdGEpPT57XG4gICAgICAgIGNvbnRlbnQudGV4dChkYXRhLm1lc3NhZ2UpXG4gICAgICB9KTtcbiAgXG4gICAgICByZXF1ZXN0LmZhaWwoZGF0YT0+e1xuICAgICAgICBjb25zdCBtZXNzYWdlPShcItCh0L7QvtCx0YnQtdC90LjQtSDQvdC1INC+0YLQv9GA0LDQstC70LXQvdC+XCIpO1xuICAgICAgICBjb250ZW50LnRleHQobWVzc2FnZSk7XG4gICAgICAgIG1vZGFsLmFkZENsYXNzKFwiZXJyb3ItbW9kYWxcIilcbiAgICAgIH0pO1xuICBcbiAgICAgIHJlcXVlc3QuYWx3YXlzKCgpPT57XG4gICAgICAgICQuZmFuY3lib3gub3Blbih7XG4gICAgICAgICAgc3JjOlwiI21vZGFsXCIsXG4gICAgICAgICAgdHlwZTpcImlubGluZVwiXG4gICAgICAgIH0pXG4gICAgICAgIGxldCBwYWdlUG9zaXRpb249d2luZG93LnNjcm9sbFk7XG4gICAgICAgIGJvZHkuY2xhc3NMaXN0LmFkZCgnZGlzYWJsZS1zY3JvbGwnKTtcbiAgICAgICAgYm9keS5kYXRhc2V0LnBvc2l0aW9uID1wYWdlUG9zaXRpb247XG4gICAgICB9KTtcbiAgICB9XG4gIFxuICB9KVxuICAkKFwiLmFwcC1jbG9zZS1tb2RhbFwiKS5jbGljayhlPT57XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgJC5mYW5jeWJveC5jbG9zZSgpO1xuICBsZXQgcGFnZVBvc2l0aW9uPXBhcnNlSW50KGJvZHkuZGF0YXNldC5wb3NpdGlvbiwxMCk7XG4gIGJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZS1zY3JvbGwnKTtcbiAgd2luZG93LnNjcm9sbCh7dG9wOnBhZ2VQb3NpdGlvbixsZWZ0OjB9KTtcbiAgYm9keS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtcG9zaXRpb24nKTtcbiAgfSk7IiwiY29uc3QgbGluZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2xpZGUtYWNjb19fbGluZScpO1xuXG5mb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbGluZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBsaW5lc1tpbmRleF1cbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NsaWRlLWFjY29fX2NvbnRlbnQnKSkgcmV0dXJuXG4gICAgXG4gICAgY29uc3QgY3VycmVudExpbmUgPSBlLnRhcmdldC5jbG9zZXN0KCcuc2xpZGUtYWNjb19fbGluZScpO1xuICAgIFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChsaW5lc1tpXSAhPT0gY3VycmVudExpbmUpXG4gICAgICBsaW5lc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1hY2NvX19saW5lX2FjdGl2ZScpXG4gICAgfSBcbiAgICBcbiAgICBpZiAoY3VycmVudExpbmUuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZS1hY2NvX19saW5lX2FjdGl2ZScpKSB7XG4gICAgICBjdXJyZW50TGluZS5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZS1hY2NvX19saW5lX2FjdGl2ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRMaW5lLmNsYXNzTGlzdC5hZGQoJ3NsaWRlLWFjY29fX2xpbmVfYWN0aXZlJylcbiAgICB9IFxuICAgIGNvbnN0IGNsb3NlRWxlbWVudCA9IG92ZXJsYXlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvc2Utc2xpZGVcIik7XG4gICAgY2xvc2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGJvZHkucmVtb3ZlQ2hpbGQob3ZlcmxheUVsZW1lbnQpO1xuICAgIH0pXG4gIH0pO1xufTsiLCJsZXQgcGxheWVyO1xuY29uc3QgcGxheWVyQ29udGFpbmVyID0gJChcIi5wbGF5ZXJcIik7XG5cbmxldCBldmVudHNJbml0ID0gKCkgPT4ge1xuICAkKFwiLnBsYXllcl9fc3RhcnRcIikuY2xpY2soZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBcbiAgICBpZiAocGxheWVyQ29udGFpbmVyLmhhc0NsYXNzKFwicGF1c2VkXCIpKSB7XG4gICAgICBwbGF5ZXIucGF1c2VWaWRlbygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGF5ZXIucGxheVZpZGVvKCk7XG4gICAgfVxuICB9KTtcblxuICAkKFwiLnBsYXllcl9fcGxheWJhY2tcIikuY2xpY2soZSA9PiB7XG4gICAgY29uc3QgYmFyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgIGNvbnN0IGNsaWNrZWRQb3NpdGlvbiA9IGUub3JpZ2luYWxFdmVudC5sYXllclg7XG4gICAgXG4gICAgY29uc3QgbmV3QnV0dG9uUG9zaXRpb25QZXJjZW50ID0gKGNsaWNrZWRQb3NpdGlvbiAvIGJhci53aWR0aCgpKSAqIDEwMDtcbiAgICBjb25zdCBuZXdQbGF5YmFja1Bvc2l0aW9uU2VjID1cbiAgICAgIChwbGF5ZXIuZ2V0RHVyYXRpb24oKSAvIDEwMCkgKiBuZXdCdXR0b25Qb3NpdGlvblBlcmNlbnQ7XG4gICAgXG4gICAgJChcIi5wbGF5ZXJfX3BsYXliYWNrLWJ1dHRvblwiKS5jc3Moe1xuICAgICAgbGVmdDogYCR7bmV3QnV0dG9uUG9zaXRpb25QZXJjZW50fSVgXG4gICAgfSk7XG4gICAgXG4gICAgcGxheWVyLnNlZWtUbyhuZXdQbGF5YmFja1Bvc2l0aW9uU2VjKTtcbiAgIH0pO1xuXG4gICAkKFwiLnBsYXllcl9fc3BsYXNoXCIpLmNsaWNrKGUgPT4ge1xuICAgIHBsYXllci5wbGF5VmlkZW8oKTtcbiAgfSlcbn07XG5cbmNvbnN0IGZvcm1hdFRpbWU9dGltZVNlYz0+e1xuICBjb25zdCByb3VuZFRpbWU9TWF0aC5yb3VuZCh0aW1lU2VjKTtcblxuICBjb25zdCBtaW51dGVzPWFkZFplcm8oTWF0aC5mbG9vcihyb3VuZFRpbWUvNjApKTtcbiAgY29uc3Qgc2Vjb25kcz1hZGRaZXJvKHJvdW5kVGltZS1taW51dGVzKjYwKTtcblxuICBmdW5jdGlvbiBhZGRaZXJvKG51bSkge1xuICAgIHJldHVybiBudW08MTA/YDAke251bX1gOm51bTtcbiAgfVxuXG4gIHJldHVybiBgJHttaW51dGVzfToke3NlY29uZHN9YFxufVxuXG5jb25zdCBvblBsYXllclJlYWR5ID0oKT0+e1xuICBjb25zdCBkdXJhdGlvblNlYz1wbGF5ZXIuZ2V0RHVyYXRpb24oKTtcbiAgJChcIi5wbGF5ZXJfX2R1cmF0aW9uLWVzdGltYXRlXCIpLnRleHQoZm9ybWF0VGltZShkdXJhdGlvblNlYykpO1xuXG4gIGlmICh0eXBlb2YgaW50ZXJ2YWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgfVxuIFxuICBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBjb25zdCBjb21wbGV0ZWRTZWMgPSBwbGF5ZXIuZ2V0Q3VycmVudFRpbWUoKTtcbiAgICBjb25zdCBjb21wbGV0ZWRQZXJjZW50PShjb21wbGV0ZWRTZWMvZHVyYXRpb25TZWMpKjEwMDtcblxuICAgICQoXCIucGxheWVyX19wbGF5YmFjay1idXR0b25cIikuY3NzKHtcbiAgICAgIGxlZnQ6YCR7Y29tcGxldGVkUGVyY2VudH0lYFxuICAgIH0pXG4gICAgJChcIi5wbGF5ZXJfX2R1cmF0aW9uLWNvbXBsZXRlZFwiKS50ZXh0KGZvcm1hdFRpbWUoY29tcGxldGVkU2VjKSk7XG4gIH0sIDEwMDApO1xufVxuY29uc3Qgb25QbGF5ZXJTdGF0ZUNoYW5nZSA9IGV2ZW50ID0+IHtcbiAgLypcbiAgICAtMSAo0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1INCy0LjQtNC10L4g0L3QtSDQvdCw0YfQsNGC0L4pXG4gICAgMCAo0LLQvtGB0L/RgNC+0LjQt9Cy0LXQtNC10L3QuNC1INCy0LjQtNC10L4g0LfQsNCy0LXRgNGI0LXQvdC+KVxuICAgIDEgKNCy0L7RgdC/0YDQvtC40LfQstC10LTQtdC90LjQtSlcbiAgICAyICjQv9Cw0YPQt9CwKVxuICAgIDMgKNCx0YPRhNC10YDQuNC30LDRhtC40Y8pXG4gICAgNSAo0LLQuNC00LXQviDQv9C+0LTQsNGO0YIg0YDQtdC/0LvQuNC60LgpLlxuICAqL1xuICBzd2l0Y2ggKGV2ZW50LmRhdGEpIHtcbiAgICBjYXNlIDE6XG4gICAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgICBwbGF5ZXJDb250YWluZXIuYWRkQ2xhc3MoXCJwYXVzZWRcIik7XG4gICAgICBicmVhaztcbiAgXG4gICAgY2FzZSAyOlxuICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xuICAgICAgcGxheWVyQ29udGFpbmVyLnJlbW92ZUNsYXNzKFwicGF1c2VkXCIpO1xuICAgICAgYnJlYWs7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIG9uWW91VHViZUlmcmFtZUFQSVJlYWR5KCkge1xuICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCd5dC1wbGF5ZXInLCB7XG4gICAgaGVpZ2h0OiAnNDA1JyxcbiAgICB3aWR0aDogJzY2MCcsXG4gICAgdmlkZW9JZDogJ21hNjd5T2RNUWZzJyxcbiAgICBldmVudHM6IHtcbiAgICAgICdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcbiAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxuICAgIH0sXG4gICAgcGxheWVyVmFyczoge1xuICAgICAgY29udHJvbHM6IDAsXG4gICAgICBkaXNhYmxla2I6IDEsXG4gICAgICBzaG93aW5mbzogMCxcbiAgICAgIHJlbDogMCxcbiAgICAgIGF1dG9wbGF5OiAwLFxuICAgICAgbW9kZXN0YnJhbmRpbmc6IDBcbiAgICB9XG4gIH0pO1xufVxuZXZlbnRzSW5pdCgpOyIsImxldCBteU1hcDtcbmNvbnN0IGluaXQgPSAoKSA9PiB7XG4gbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwXCIsIHtcbiAgIGNlbnRlcjogWzU1Ljc1MjAwNCwgMzcuNTc2MTMzXSxcbiAgIHpvb206IDEzLFxuICAgY29udHJvbHM6IFtdLFxuIH0pO1xuIFxuIGxldCBjb29yZHMgPSBbXG4gICAgIFs1NS43NTIwNDQsIDM3LjU5OTY0OV1cbiAgXSxcbiAgbXlDb2xsZWN0aW9uID0gbmV3IHltYXBzLkdlb09iamVjdENvbGxlY3Rpb24oe30sIHtcbiAgICBkcmFnZ2FibGU6IGZhbHNlLFxuICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcbiAgICBpY29uSW1hZ2VIcmVmOiAnLi9pbWcvbWFya2VyLnBuZycsXG4gICAgaWNvbkltYWdlU2l6ZTogWzQ2LCA1N10sXG4gICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtNTJdXG4gIH0pO1xuIFxuIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICBteUNvbGxlY3Rpb24uYWRkKG5ldyB5bWFwcy5QbGFjZW1hcmsoY29vcmRzW2ldKSk7XG4gfVxuIFxuIG15TWFwLmdlb09iamVjdHMuYWRkKG15Q29sbGVjdGlvbik7XG4gXG4gbXlNYXAuYmVoYXZpb3JzLmRpc2FibGUoJ3Njcm9sbFpvb20nKTtcbn07XG4gXG55bWFwcy5yZWFkeShpbml0KTsiLCJjb25zdCBzZWN0aW9ucz0kKFwiLnNlY3Rpb25cIik7XG5jb25zdCBkaXNwbGF5PSQoXCIubWFpbmNvbnRlbnRcIilcbmNvbnN0IHNpZGVtZW51PSQoXCIuZml4ZWQtbWVudVwiKTtcbmNvbnN0IG1lbnVJdGVtcz1zaWRlbWVudS5maW5kKFwiLmZpeGVkLW1lbnVfX2l0ZW1cIilcblxuY29uc3QgbW9iaWxlRGV0ZWN0PSBuZXcgTW9iaWxlRGV0ZWN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KTtcbmNvbnN0IGlzTW9iaWxlPW1vYmlsZURldGVjdC5tb2JpbGUoKTtcblxubGV0IGluc2Nyb2xsPWZhbHNlO1xuXG5zZWN0aW9ucy5maXJzdCgpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuXG5jb25zdCBjb3VudFNlY3Rpb25Qb3NpdGlvbj1zZWN0aW9uRXE9PntcbiAgY29uc3QgcG9zaXRpb249c2VjdGlvbkVxKi0xMDA7XG4gIGlmIChpc05hTihwb3NpdGlvbikpIHtcbiAgICBjb25zb2xlLmVycm9yKCfQv9C10YDQtdC00LDQvdC+INC90LXQstC10YDQvdC+0LUg0LfQvdCw0YfQtdC90LjQtSDQsiBjb3VudFNlY3Rpb25Qb3NpdGlvbicpO1xuICAgIHJldHVybjA7XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9uO1xufVxuXG5jb25zdCBjaGFuZ2VNZW51VGhlbWVGb3JTZWN0aW9uPShzZWN0aW9uRXEpPT57XG4gIGNvbnN0IGN1cnJlbnRzZWN0aW9uPXNlY3Rpb25zLmVxKHNlY3Rpb25FcSk7XG4gIGNvbnN0IG1lbnVUaGVtZT1jdXJyZW50c2VjdGlvbi5hdHRyKFwiZGF0YS1zaWRlbWVudS10aGVtZVwiKTtcbiAgY29uc3QgYWN0aXZlQ2xhc3M9XCJmaXhlZC1tZW51LS1zaGFkb3dlZFwiXG5cbiAgaWYgKG1lbnVUaGVtZT09XCJibGFja1wiKSB7XG4gICAgc2lkZW1lbnUuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgIHNpZGVtZW51LnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcbiAgfVxufVxuXG5jb25zdCByZXNldEFjdGl2ZUNsYXNzRm9ySXRlbT0oaXRlbXMsaXRlbUVxLGFjdGl2ZUNsYXNzKT0+e1xuICBpdGVtcy5lcShpdGVtRXEpLmFkZENsYXNzKGFjdGl2ZUNsYXNzKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcbn1cblxuY29uc3QgcGVyZm9ybVRyYW5zaXRpb249c2VjdGlvbkVxPT57XG4gIGlmIChpbnNjcm9sbCkgcmV0dXJuO1xuXG4gIGNvbnN0IHRyYW5zaXRpb25PdmVyPTEwMDA7XG4gIGNvbnN0IG1vdXNlSW5lcnRpYU92ZXI9MzAwO1xuXG4gIGluc2Nyb2xsPXRydWU7XG5cbiAgY29uc3QgcG9zaXRpb249Y291bnRTZWN0aW9uUG9zaXRpb24oc2VjdGlvbkVxKTtcblxuICBjaGFuZ2VNZW51VGhlbWVGb3JTZWN0aW9uKHNlY3Rpb25FcSk7XG5cbiAgZGlzcGxheS5jc3Moe1xuICAgIHRyYW5zZm9ybTpgdHJhbnNsYXRlWSgke3Bvc2l0aW9ufSUpYFxuICB9KTtcblxuICByZXNldEFjdGl2ZUNsYXNzRm9ySXRlbShzZWN0aW9ucyxzZWN0aW9uRXEsXCJhY3RpdmVcIik7XG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgaW5zY3JvbGw9ZmFsc2U7XG4gICAgcmVzZXRBY3RpdmVDbGFzc0Zvckl0ZW0obWVudUl0ZW1zLHNlY3Rpb25FcSxcImZpeGVkLW1lbnVfX2l0ZW0tLWFjdGl2ZVwiKVxuICB9LCB0cmFuc2l0aW9uT3Zlcittb3VzZUluZXJ0aWFPdmVyICk7XG59XG5cbmNvbnN0IHZpZXdwb3J0U2Nyb2xsZXI9KCk9PntcbiAgY29uc3QgYWN0aXZlc2VjdGlvbj1zZWN0aW9ucy5maWx0ZXIoXCIuYWN0aXZlXCIpO1xuICBjb25zdCBuZXh0c2VjdGlvbj1hY3RpdmVzZWN0aW9uLm5leHQoKTtcbiAgY29uc3QgcHJldnNlY3Rpb249YWN0aXZlc2VjdGlvbi5wcmV2KCk7XG5cbiAgcmV0dXJuIHtcbiAgICBuZXh0KCl7XG4gICAgICBpZiAobmV4dHNlY3Rpb24ubGVuZ3RoKSB7XG4gICAgICAgIHBlcmZvcm1UcmFuc2l0aW9uKG5leHRzZWN0aW9uLmluZGV4KCkpO1xuICAgICAgfVxuICAgIH0sXG4gICAgcHJldigpe1xuICAgICAgaWYgKHByZXZzZWN0aW9uLmxlbmd0aCkge1xuICAgICAgICBwZXJmb3JtVHJhbnNpdGlvbihwcmV2c2VjdGlvbi5pbmRleCgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuJCh3aW5kb3cpLm9uKFwid2hlZWxcIixlPT57XG4gIGNvbnN0IGRlbHRhWT1lLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xuICBjb25zdCBzY3JvbGxlcj12aWV3cG9ydFNjcm9sbGVyKCk7XG4gIGlmIChkZWx0YVk+MCkge1xuICAgIHNjcm9sbGVyLm5leHQoKTtcbiAgfVxuICBpZiAoZGVsdGFZPDApIHtcbiAgICBzY3JvbGxlci5wcmV2KCk7XG4gIH1cbn0pXG5cbiQoXCIud3JhcGVyXCIpLm9uKFwidG91Y2htb3ZlXCIsIGUgPT4gZS5wcmV2ZW50RGVmYXVsdCgpKTtcblxuJChcIltkYXRhLXNjcm9sbC10b11cIikuY2xpY2soZT0+e1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgJHRoaXM9JChlLmN1cnJlbnRUYXJnZXQpO1xuICBjb25zdCB0YXJnZXQ9JHRoaXMuYXR0cihcImRhdGEtc2Nyb2xsLXRvXCIpO1xuICBjb25zdCByZXFzZWN0aW9uPSQoYFtkYXRhLXNlY3Rpb24taWQ9JHt0YXJnZXR9XWApO1xuXG4gIHBlcmZvcm1UcmFuc2l0aW9uKHJlcXNlY3Rpb24uaW5kZXgoKSk7XG59KVxuXG4vL2h0dHBzOi8vZ2l0aHViLmNvbS9tYXR0YnJ5c29uL1RvdWNoU3dpcGUtSnF1ZXJ5LVBsdWdpbiNib3dlclxuaWYgKGlzTW9iaWxlKSB7XG4gICQoXCJib2R5XCIpLnN3aXBlKCB7XG4gICAgc3dpcGU6ZnVuY3Rpb24oZXZlbnQsIGRpcmVjdGlvbiwgKSB7XG4gICAgICBjb25zdCBzY3JvbGxlcj12aWV3cG9ydFNjcm9sbGVyKCk7XG4gICAgICBsZXQgc2Nyb2xsRGlyZWN0aW9uPVwiXCI7XG4gIFxuICAgICAgaWYgKGRpcmVjdGlvbj09XCJ1cFwiKSBzY3JvbGxEaXJlY3Rpb249XCJuZXh0XCI7XG4gICAgICBpZiAoZGlyZWN0aW9uPT1cImRvd25cIikgc2Nyb2xsRGlyZWN0aW9uPVwicHJldlwiO1xuICBcbiAgICAgIHNjcm9sbGVyW3Njcm9sbERpcmVjdGlvbl0oKTtcbiAgICB9XG4gIH0pO1xufTsiXX0=
